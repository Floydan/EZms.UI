function imagePasteHandler(n){function i(n){const r=n.clipboardData||n.originalEvent.clipboardData||window.ClipboardData,i=r.items||[];i.length===1&&/text\/plain/.test(i[0].type)&&i[0].getAsString(t=>{const r=new RegExp("^https://www\\.youtube\\.com/watch\\?v=(\\w+)(?:$|&t=(\\d+))?$","i"),u=new RegExp("^https://youtu\\.be/([^\\?]*)(?:$|\\?t=(\\d+))","");let i=r.exec(t)||[];if(i.length===0&&(i=u.exec(t)||[]),i.length>1){const e=i[1];let f="";i.length>2&&i[2]&&(f=`?start=${i[2]}`);const r=$(n.target),o=`
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/${e}${f}" frameborder="0" allow="accelerometer; encrypted-media; gyroscope;" allowfullscreen></iframe>
`;let u=r.val();u=u.replace(t,o);r.val(u);setTimeout(()=>r.trigger("textarea-adjust"),100)}});t(i,n)}function t(n,t){for(let i=0;i<n.length;i++){const u=n[i];if(!/text\/(html|plain)/.test(u.type)){const i=h(u);if(!i)return;const e=Date.now();let n=i.name;const f=$($(t.target).attr("data-folder-reference")).val();f&&f.length!==0&&(n=r([f,n]));l(e,n,t);const o=new FormData;o.append("file",i,n);$.ajax({url:`${window.baseUrl}ezms/imageupload/upload`,type:"post",method:"post",data:o,cache:!1,contentType:!1,processData:!1,success:n=>{a(e,(n||[])[0],t)},error:n=>{console.error(n)},complete:n=>{$(t.target).trigger("upload-complete",{success:n.status===200,result:n.status===200?n.responseJSON[0]:""})}})}}}function s(n){return n.name!=="undefined"&&typeof n.size!="undefined"}function h(n){return s(n)?n:typeof n.getAsFile!="undefined"?n.getAsFile():null}function c(n){if(!n)return"";const t=n.split(".");return t[t.length-1].toLowerCase()}function r(n,t){const i=t||"/";return n=n.map((t,r)=>(r&&(t=t.replace(new RegExp("^"+i),"")),r!==n.length-1&&(t=t.replace(new RegExp(i+"$"),"")),t)),n.join(i)}function u(n){n.stopPropagation();n.preventDefault();const i=n.dataTransfer||n.originalEvent.dataTransfer;if(!i)return!1;const r=i.items;return t(r,n),!1}function f(n){n.stopPropagation();n.preventDefault();const i=n.target.files;return i?(t(i,n),!1):!1}function l(n,t,i){if(i&&i.target){const r=$(i.target),f=r.val();let u=-1;try{typeof i.target.selectionStart!="undefined"&&(u=i.target.selectionStart||-1)}catch(o){}const e=`![Uploading file](${n})`;if(r.data("no-md")){const n=r.parents(".input-group").find("input[type=text]");n&&n.length!==0?n.val("Uploading file..."):r.val("Uploading file...");return}if(!r.data("no-md")&&(r.attr("type")==="file"||r.hasClass("drop-area"))){$('div[data-js-element="upload-status-container"]').removeClass("d-none");$(".upload-status").show().append(`<li data-id="${n}">Uploading file '${t}'</div>`);return}if(u<0)r.val(f+e);else{const n=[f.slice(0,u),e,f.slice(u)];r.val(n.join(""))}}}function a(n,t,i){if(i&&i.target){const u=$(i.target);let f=u.val();const s=v(t);var o=r([window.baseUrl,"files",t]);const h=`![Uploading file](${n})`,c=`${s?"!":""}[image-${n}](${o})`;if(u.data("no-md")===!0)f=o;else{if(!u.data("no-md")&&(u.attr("type")==="file"||u.hasClass("drop-area"))){$('div[data-js-element="upload-status-container"]').removeClass("d-none");$(".upload-status").find(`li[data-id=${n}]`).html(`Upload "${n}" complete, filepath: "${o}"`);return}f=f.replace(h,c)}const e=u.parents(".input-group").find("input[type=text]");e&&e.length!==0?(e.val(f),e.trigger("upload-complete").trigger("change")):(u.val(f),u.trigger("change"))}}function v(n){const t=c(n);return/jpg|jpeg|bmp|gif|png|tiff/i.test(t)}function e(n){n.stopPropagation();n.preventDefault();const t=n.dataTransfer||n.originalEvent.dataTransfer;t&&(t.dropEffect="copy")}function o(t,i){if(i=i||0,!(i>2)){const r=$(n);r&&r.length!==0?t(r):setTimeout(function(){o(t,++i)},100)}}if(typeof n=="string")return o(function(n){for(let t=0,r=n.length;t<r;t++){const r=$(n[t]);r.data("no-md",n[t].localName==="input"&&n[t].type==="text");r.off("paste").on("paste",i);r.off("dragover").on("dragover",e);r.off("drop").on("drop",u);const o=r.parents(".input-group").find("input[type=file]");if(o&&o.length!==0){o.off("change").on("change",f).off("click").on("click",function(n){$(n.target).val("")});o.data("no-md",r.data("no-md"))}}}),$(n);for(let t=0,r=n.length;t<r;t++){const r=$(n[t]);r.data("no-md",n[t].localName==="input"&&n[t].type==="text");r.off("paste").on("paste",i);r.off("dragover").on("dragover",e);r.off("drop").on("drop",u);const o=r.parents(".input-group").find("input[type=file]");if(o&&o.length!==0){o.off("change").on("change",f).off("click").on("click",function(n){$(n.target).val("")});o.data("no-md",r.data("no-md"))}}return n}function clearModalInputs(n){return event.preventDefault(),$("input,select,textarea",n).val("").attr("value","").trigger("change"),!1}function addModalToForm(){const n=$(event.target).parents(".modal"),t=n.find(".modal-body").clone(),i=$(`#${n.data("form-id")} > .groups`),r=$("> .model-group",i),u=$("input,select,textarea",t);for(let n=0;n<u.length;n++){const t=$(u[n]);t.attr("name")&&t.attr("name",t.attr("name").replace("[0]",`[${r.length}]`))}const f=$(`<div class="model-group group-${r.length} border border-success p-2 mt-2" style="position:relative;">
                            <a href="#" class="temporary-entry-sort-btn text-secondary p-2 sortable-handle"><span class="fas fa-sort"></span></a>
                            <a href="#" class="temporary-entry-remove-btn btn btn-secondary btn-sm"><span class="fas fa-trash"></span></a>
                        </div>`);f.append(t);i.append(f);$(".temporary-entry-remove-btn").off("click").on("click",deleteTemporaryEntry);$(document).trigger("reinitialize-change-listeners").trigger("autosave")}function deleteTemporaryEntry(n){return n&&n.preventDefault(),$(n.target).parents(".model-group").remove(),$(document).trigger("reinitialize-change-listeners").trigger("autosave"),!1}var QRCode;!function(){function c(n){var t;this.mode=r.MODE_8BIT_BYTE;this.data=n;this.parsedData=[];for(var i=[],u=0,f=this.data.length;f>u;u++)t=this.data.charCodeAt(u),t>65536?(i[0]=240|(1835008&t)>>>18,i[1]=128|(258048&t)>>>12,i[2]=128|(4032&t)>>>6,i[3]=128|63&t):t>2048?(i[0]=224|(61440&t)>>>12,i[1]=128|(4032&t)>>>6,i[2]=128|63&t):t>128?(i[0]=192|(1984&t)>>>6,i[1]=128|63&t):i[0]=t,this.parsedData=this.parsedData.concat(i);this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function u(n,t){this.typeNumber=n;this.errorCorrectLevel=t;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}function s(n,t){var i,r;if(void 0==n.length)throw new Error(n.length+"/"+t);for(i=0;i<n.length&&0==n[i];)i++;for(this.num=new Array(n.length-i+t),r=0;r<n.length-i;r++)this.num[r]=n[r+i]}function f(n,t){this.totalCount=n;this.dataCount=t}function l(){this.buffer=[];this.length=0}function v(){return"undefined"!=typeof CanvasRenderingContext2D}function a(){var n=!1,t=navigator.userAgent;return/android/i.test(t)&&(n=!0,aMat=t.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(n=parseFloat(aMat[1]))),n}function y(n,t){for(var r,u=1,f=p(n),i=0,o=h.length;o>=i;i++){r=0;switch(t){case e.L:r=h[i][0];break;case e.M:r=h[i][1];break;case e.Q:r=h[i][2];break;case e.H:r=h[i][3]}if(r>=f)break;u++}if(u>h.length)throw new Error("Too long data");return u}function p(n){var t=encodeURI(n).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=n?3:0)}var i;c.prototype={getLength:function(){return this.parsedData.length},write:function(n){for(var t=0,i=this.parsedData.length;i>t;t++)n.put(this.parsedData[t],8)}};u.prototype={addData:function(n){var t=new c(n);this.dataList.push(t);this.dataCache=null},isDark:function(n,t){if(0>n||this.moduleCount<=n||0>t||this.moduleCount<=t)throw new Error(n+","+t);return this.modules[n][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(n,t){var i,r;for(this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount),i=0;i<this.moduleCount;i++)for(this.modules[i]=new Array(this.moduleCount),r=0;r<this.moduleCount;r++)this.modules[i][r]=null;this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(n,t);this.typeNumber>=7&&this.setupTypeNumber(n);null==this.dataCache&&(this.dataCache=u.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,t)},setupPositionProbePattern:function(n,t){for(var r,i=-1;7>=i;i++)if(!(-1>=n+i||this.moduleCount<=n+i))for(r=-1;7>=r;r++)-1>=t+r||this.moduleCount<=t+r||(this.modules[n+i][t+r]=i>=0&&6>=i&&(0==r||6==r)||r>=0&&6>=r&&(0==i||6==i)||i>=2&&4>=i&&r>=2&&4>=r?!0:!1)},getBestMaskPattern:function(){for(var i,r=0,u=0,t=0;8>t;t++)this.makeImpl(!0,t),i=n.getLostPoint(this),(0==t||r>i)&&(r=i,u=t);return u},createMovieClip:function(n,t,i){var r=n.createEmptyMovieClip(t,i),u=1,f,e,o,s,h;for(this.make(),f=0;f<this.modules.length;f++)for(e=f*u,o=0;o<this.modules[f].length;o++)s=o*u,h=this.modules[f][o],h&&(r.beginFill(0,100),r.moveTo(s,e),r.lineTo(s+u,e),r.lineTo(s+u,e+u),r.lineTo(s,e+u),r.endFill());return r},setupTimingPattern:function(){for(var t,n=8;n<this.moduleCount-8;n++)null==this.modules[n][6]&&(this.modules[n][6]=0==n%2);for(t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var f,e,o,t,i,r=n.getPatternPosition(this.typeNumber),u=0;u<r.length;u++)for(f=0;f<r.length;f++)if(e=r[u],o=r[f],null==this.modules[e][o])for(t=-2;2>=t;t++)for(i=-2;2>=i;i++)this.modules[e+t][o+i]=-2==t||2==t||-2==i||2==i||0==t&&0==i?!0:!1},setupTypeNumber:function(t){for(var r,u=n.getBCHTypeNumber(this.typeNumber),i=0;18>i;i++)r=!t&&1==(1&u>>i),this.modules[Math.floor(i/3)][i%3+this.moduleCount-11]=r;for(i=0;18>i;i++)r=!t&&1==(1&u>>i),this.modules[i%3+this.moduleCount-11][Math.floor(i/3)]=r},setupTypeInfo:function(t,i){for(var u,e=this.errorCorrectLevel<<3|i,f=n.getBCHTypeInfo(e),r=0;15>r;r++)u=!t&&1==(1&f>>r),6>r?this.modules[r][8]=u:8>r?this.modules[r+1][8]=u:this.modules[this.moduleCount-15+r][8]=u;for(r=0;15>r;r++)u=!t&&1==(1&f>>r),8>r?this.modules[8][this.moduleCount-r-1]=u:9>r?this.modules[8][15-r]=u:this.modules[8][14-r]=u;this.modules[this.moduleCount-8][8]=!t},mapData:function(t,i){for(var f,e,c,o=-1,r=this.moduleCount-1,s=7,h=0,u=this.moduleCount-1;u>0;u-=2)for(6==u&&u--;;){for(f=0;2>f;f++)null==this.modules[r][u-f]&&(e=!1,h<t.length&&(e=1==(1&t[h]>>>s)),c=n.getMask(i,r,u-f),c&&(e=!e),this.modules[r][u-f]=e,s--,-1==s&&(h++,s=7));if(r+=o,0>r||this.moduleCount<=r){r-=o;o=-o;break}}}};u.PAD0=236;u.PAD1=17;u.createData=function(t,i,r){for(var h,s,c=f.getRSBlocks(t,i),e=new l,o=0;o<r.length;o++)h=r[o],e.put(h.mode,4),e.put(h.getLength(),n.getLengthInBits(h.mode,t)),h.write(e);for(s=0,o=0;o<c.length;o++)s+=c[o].dataCount;if(e.getLengthInBits()>8*s)throw new Error("code length overflow. ("+e.getLengthInBits()+">"+8*s+")");for(e.getLengthInBits()+4<=8*s&&e.put(0,4);0!=e.getLengthInBits()%8;)e.putBit(!1);for(;;){if(e.getLengthInBits()>=8*s)break;if(e.put(u.PAD0,8),e.getLengthInBits()>=8*s)break;e.put(u.PAD1,8)}return u.createBytes(e,c)};u.createBytes=function(t,i){for(var o,l,v,y,r,w=0,h=0,c=0,f=new Array(i.length),e=new Array(i.length),u=0;u<i.length;u++){for(o=i[u].dataCount,l=i[u].totalCount-o,h=Math.max(h,o),c=Math.max(c,l),f[u]=new Array(o),r=0;r<f[u].length;r++)f[u][r]=255&t.buffer[r+w];w+=o;var a=n.getErrorCorrectPolynomial(l),d=new s(f[u],a.getLength()-1),b=d.mod(a);for(e[u]=new Array(a.getLength()-1),r=0;r<e[u].length;r++)v=r+b.getLength()-e[u].length,e[u][r]=v>=0?b.get(v):0}for(y=0,r=0;r<i.length;r++)y+=i[r].totalCount;for(var p=new Array(y),k=0,r=0;h>r;r++)for(u=0;u<i.length;u++)r<f[u].length&&(p[k++]=f[u][r]);for(r=0;c>r;r++)for(u=0;u<i.length;u++)r<e[u].length&&(p[k++]=e[u][r]);return p};for(var r={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},e={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},n={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var i=t<<10;n.getBCHDigit(i)-n.getBCHDigit(n.G15)>=0;)i^=n.G15<<n.getBCHDigit(i)-n.getBCHDigit(n.G15);return(t<<10|i)^n.G15_MASK},getBCHTypeNumber:function(t){for(var i=t<<12;n.getBCHDigit(i)-n.getBCHDigit(n.G18)>=0;)i^=n.G18<<n.getBCHDigit(i)-n.getBCHDigit(n.G18);return t<<12|i},getBCHDigit:function(n){for(var t=0;0!=n;)t++,n>>>=1;return t},getPatternPosition:function(t){return n.PATTERN_POSITION_TABLE[t-1]},getMask:function(n,t,i){switch(n){case o.PATTERN000:return 0==(t+i)%2;case o.PATTERN001:return 0==t%2;case o.PATTERN010:return 0==i%3;case o.PATTERN011:return 0==(t+i)%3;case o.PATTERN100:return 0==(Math.floor(t/2)+Math.floor(i/3))%2;case o.PATTERN101:return 0==t*i%2+t*i%3;case o.PATTERN110:return 0==(t*i%2+t*i%3)%2;case o.PATTERN111:return 0==(t*i%3+(t+i)%2)%2;default:throw new Error("bad maskPattern:"+n);}},getErrorCorrectPolynomial:function(n){for(var i=new s([1],0),r=0;n>r;r++)i=i.multiply(new s([1,t.gexp(r)],0));return i},getLengthInBits:function(n,t){if(t>=1&&10>t)switch(n){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw new Error("mode:"+n);}else if(27>t)switch(n){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+n);}else{if(!(41>t))throw new Error("type:"+t);switch(n){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+n);}}},getLostPoint:function(n){for(var u,f,h,t,c,r=n.getModuleCount(),o=0,i=0;r>i;i++)for(t=0;r>t;t++){for(var s=0,l=n.isDark(i,t),e=-1;1>=e;e++)if(!(0>i+e||i+e>=r))for(u=-1;1>=u;u++)0>t+u||t+u>=r||(0!=e||0!=u)&&l==n.isDark(i+e,t+u)&&s++;s>5&&(o+=3+s-5)}for(i=0;r-1>i;i++)for(t=0;r-1>t;t++)f=0,n.isDark(i,t)&&f++,n.isDark(i+1,t)&&f++,n.isDark(i,t+1)&&f++,n.isDark(i+1,t+1)&&f++,(0==f||4==f)&&(o+=3);for(i=0;r>i;i++)for(t=0;r-6>t;t++)n.isDark(i,t)&&!n.isDark(i,t+1)&&n.isDark(i,t+2)&&n.isDark(i,t+3)&&n.isDark(i,t+4)&&!n.isDark(i,t+5)&&n.isDark(i,t+6)&&(o+=40);for(t=0;r>t;t++)for(i=0;r-6>i;i++)n.isDark(i,t)&&!n.isDark(i+1,t)&&n.isDark(i+2,t)&&n.isDark(i+3,t)&&n.isDark(i+4,t)&&!n.isDark(i+5,t)&&n.isDark(i+6,t)&&(o+=40);for(h=0,t=0;r>t;t++)for(i=0;r>i;i++)n.isDark(i,t)&&h++;return c=Math.abs(100*h/r/r-50)/5,o+10*c}},t={glog:function(n){if(1>n)throw new Error("glog("+n+")");return t.LOG_TABLE[n]},gexp:function(n){for(;0>n;)n+=255;for(;n>=256;)n-=255;return t.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;8>i;i++)t.EXP_TABLE[i]=1<<i;for(i=8;256>i;i++)t.EXP_TABLE[i]=t.EXP_TABLE[i-4]^t.EXP_TABLE[i-5]^t.EXP_TABLE[i-6]^t.EXP_TABLE[i-8];for(i=0;255>i;i++)t.LOG_TABLE[t.EXP_TABLE[i]]=i;s.prototype={get:function(n){return this.num[n]},getLength:function(){return this.num.length},multiply:function(n){for(var r,u=new Array(this.getLength()+n.getLength()-1),i=0;i<this.getLength();i++)for(r=0;r<n.getLength();r++)u[i+r]^=t.gexp(t.glog(this.get(i))+t.glog(n.get(r)));return new s(u,0)},mod:function(n){var i;if(this.getLength()-n.getLength()<0)return this;for(var u=t.glog(this.get(0))-t.glog(n.get(0)),r=new Array(this.getLength()),i=0;i<this.getLength();i++)r[i]=this.get(i);for(i=0;i<n.getLength();i++)r[i]^=t.gexp(t.glog(n.get(i))+u);return new s(r,0).mod(n)}};f.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];f.getRSBlocks=function(n,t){var i=f.getRsBlockTable(n,t);if(void 0==i)throw new Error("bad rs block @ typeNumber:"+n+"/errorCorrectLevel:"+t);for(var o=i.length/3,u=[],r=0;o>r;r++)for(var s=i[3*r+0],h=i[3*r+1],c=i[3*r+2],e=0;s>e;e++)u.push(new f(h,c));return u};f.getRsBlockTable=function(n,t){switch(t){case e.L:return f.RS_BLOCK_TABLE[4*(n-1)+0];case e.M:return f.RS_BLOCK_TABLE[4*(n-1)+1];case e.Q:return f.RS_BLOCK_TABLE[4*(n-1)+2];case e.H:return f.RS_BLOCK_TABLE[4*(n-1)+3];default:return void 0}};l.prototype={get:function(n){var t=Math.floor(n/8);return 1==(1&this.buffer[t]>>>7-n%8)},put:function(n,t){for(var i=0;t>i;i++)this.putBit(1==(1&n>>>t-i-1))},getLengthInBits:function(){return this.length},putBit:function(n){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0);n&&(this.buffer[t]|=128>>>this.length%8);this.length++}};var h=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],w=function(){var n=function(n,t){this._el=n;this._htOption=t};return n.prototype.draw=function(n){function e(n,t){var r=document.createElementNS("http://www.w3.org/2000/svg",n);for(var i in t)t.hasOwnProperty(i)&&r.setAttribute(i,t[i]);return r}var f=this._htOption,s=this._el,t=n.getModuleCount(),i,r,u,o;for(Math.floor(f.width/t),Math.floor(f.height/t),this.clear(),i=e("svg",{viewBox:"0 0 "+String(t)+" "+String(t),width:"100%",height:"100%",fill:f.colorLight}),i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),s.appendChild(i),i.appendChild(e("rect",{fill:f.colorDark,width:"1",height:"1",id:"template"})),r=0;t>r;r++)for(u=0;t>u;u++)n.isDark(r,u)&&(o=e("use",{x:String(r),y:String(u)}),o.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),i.appendChild(o))},n.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},n}(),b="svg"===document.documentElement.tagName.toLowerCase(),k=b?w:v()?function(){function r(){this._elImage.src=this._elCanvas.toDataURL("image/png");this._elImage.style.display="block";this._elCanvas.style.display="none"}function u(n,t){var i=this;if(i._fFail=t,i._fSuccess=n,null===i._bSupportDataURI){var r=document.createElement("img"),u=function(){i._bSupportDataURI=!1;i._fFail&&_fFail.call(i)},f=function(){i._bSupportDataURI=!0;i._fSuccess&&i._fSuccess.call(i)};return r.onabort=u,r.onerror=u,r.onload=f,r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}i._bSupportDataURI===!0&&i._fSuccess?i._fSuccess.call(i):i._bSupportDataURI===!1&&i._fFail&&i._fFail.call(i)}var t,i,n;return this._android&&this._android<=2.1&&(t=1/window.devicePixelRatio,i=CanvasRenderingContext2D.prototype.drawImage,CanvasRenderingContext2D.prototype.drawImage=function(n,r,u,f,e,o,s,h){if("nodeName"in n&&/img/i.test(n.nodeName))for(var c=arguments.length-1;c>=1;c--)arguments[c]=arguments[c]*t;else"undefined"==typeof h&&(arguments[1]*=t,arguments[2]*=t,arguments[3]*=t,arguments[4]*=t);i.apply(this,arguments)}),n=function(n,t){this._bIsPainted=!1;this._android=a();this._htOption=t;this._elCanvas=document.createElement("canvas");this._elCanvas.width=t.width;this._elCanvas.height=t.height;n.appendChild(this._elCanvas);this._el=n;this._oContext=this._elCanvas.getContext("2d");this._bIsPainted=!1;this._elImage=document.createElement("img");this._elImage.style.display="none";this._el.appendChild(this._elImage);this._bSupportDataURI=null},n.prototype.draw=function(n){var v=this._elImage,t=this._oContext,i=this._htOption,f=n.getModuleCount(),e=i.width/f,o=i.height/f,c=Math.round(e),l=Math.round(o),r,u;for(v.style.display="none",this.clear(),r=0;f>r;r++)for(u=0;f>u;u++){var a=n.isDark(r,u),s=u*e,h=r*o;t.strokeStyle=a?i.colorDark:i.colorLight;t.lineWidth=1;t.fillStyle=a?i.colorDark:i.colorLight;t.fillRect(s,h,e,o);t.strokeRect(Math.floor(s)+.5,Math.floor(h)+.5,c,l);t.strokeRect(Math.ceil(s)-.5,Math.ceil(h)-.5,c,l)}this._bIsPainted=!0},n.prototype.makeImage=function(){this._bIsPainted&&u.call(this,r)},n.prototype.isPainted=function(){return this._bIsPainted},n.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height);this._bIsPainted=!1},n.prototype.round=function(n){return n?Math.floor(1e3*n)/1e3:n},n}():function(){var n=function(n,t){this._el=n;this._htOption=t};return n.prototype.draw=function(n){for(var u,t=this._htOption,o=this._el,r=n.getModuleCount(),c=Math.floor(t.width/r),l=Math.floor(t.height/r),i=['<table style="border:0;border-collapse:collapse;">'],f=0;r>f;f++){for(i.push("<tr>"),u=0;r>u;u++)i.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+c+"px;height:"+l+"px;background-color:"+(n.isDark(f,u)?t.colorDark:t.colorLight)+';"><\/td>');i.push("<\/tr>")}i.push("<\/table>");o.innerHTML=i.join("");var e=o.childNodes[0],s=(t.width-e.offsetWidth)/2,h=(t.height-e.offsetHeight)/2;s>0&&h>0&&(e.style.margin=h+"px "+s+"px")},n.prototype.clear=function(){this._el.innerHTML=""},n}();QRCode=function(n,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:e.H},"string"==typeof t&&(t={text:t}),t)for(var i in t)this._htOption[i]=t[i];"string"==typeof n&&(n=document.getElementById(n));this._android=a();this._el=n;this._oQRCode=null;this._oDrawing=new k(this._el,this._htOption);this._htOption.text&&this.makeCode(this._htOption.text)};QRCode.prototype.makeCode=function(n){this._oQRCode=new u(y(n,this._htOption.correctLevel),this._htOption.correctLevel);this._oQRCode.addData(n);this._oQRCode.make();this._el.title=n;this._oDrawing.draw(this._oQRCode);this.makeImage()};QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()};QRCode.prototype.clear=function(){this._oDrawing.clear()};QRCode.CorrectLevel=e}(),function(n){"use strict";function l(n){this.tokens=[];this.tokens.links=Object.create(null);this.options=n||r.defaults;this.rules=t.normal;this.options.pedantic?this.rules=t.pedantic:this.options.gfm&&(this.rules=this.options.tables?t.tables:t.gfm)}function o(n,t){if(this.options=t||r.defaults,this.links=n,this.rules=i.normal,this.renderer=this.options.renderer||new f,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.rules=this.options.breaks?i.breaks:i.gfm)}function f(n){this.options=n||r.defaults}function c(){}function h(n){this.tokens=[];this.token=null;this.options=n||r.defaults;this.options.renderer=this.options.renderer||new f;this.renderer=this.options.renderer;this.renderer.options=this.options;this.slugger=new p}function p(){this.seen={}}function u(n,t){if(t){if(u.escapeTest.test(n))return n.replace(u.escapeReplace,function(n){return u.replacements[n]})}else if(u.escapeTestNoEncode.test(n))return n.replace(u.escapeReplaceNoEncode,function(n){return u.replacements[n]});return n}function w(n){return n.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,function(n,t){return(t=t.toLowerCase(),t==="colon")?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function e(n,t){return n=n.source||n,t=t||"",{replace:function(t,i){return i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),n=n.replace(t,i),this},getRegex:function(){return new RegExp(n,t)}}}function b(n,t,i){if(n){try{var r=decodeURIComponent(w(i)).replace(/[^\w:]/g,"").toLowerCase()}catch(u){return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}t&&!k.test(i)&&(i=g(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(u){return null}return i}function g(n,t){return v[" "+n]||(v[" "+n]=/^[^:]+:\/*[^/]*$/.test(n)?n+"/":d(n,"/",!0)),n=v[" "+n],t.slice(0,2)==="//"?n.replace(/:[\s\S]*/,":")+t:t.charAt(0)==="/"?n.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:n+t}function a(){}function s(n){for(var r=1,t,i;r<arguments.length;r++){t=arguments[r];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}function y(n,t){var u=n.replace(/\|/g,function(n,t,i){for(var r=!1,u=t;--u>=0&&i[u]==="\\";)r=!r;return r?"|":" |"}),i=u.split(/ \|/),r=0;if(i.length>t)i.splice(t);else while(i.length<t)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function d(n,t,i){var r,u;if(n.length===0)return"";for(r=0;r<n.length;)if(u=n.charAt(n.length-r-1),u!==t||i)if(u!==t&&i)r++;else break;else r++;return n.substr(0,n.length-r)}function nt(n,t){var r,i;if(n.indexOf(t[1])===-1)return-1;for(r=0,i=0;i<n.length;i++)if(n[i]==="\\")i++;else if(n[i]===t[0])r++;else if(n[i]===t[1]&&(r--,r<0))return i;return-1}function r(n,t,i){var f,o,c,a,e;if(typeof n=="undefined"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(i||typeof t=="function"){i||(i=t,t=null);t=s({},r.defaults,t||{});f=t.highlight;a=0;try{o=l.lex(n,t)}catch(v){return i(v)}if((c=o.length,e=function(n){if(n)return t.highlight=f,i(n);var r;try{r=h.parse(o,t)}catch(u){n=u}return t.highlight=f,n?i(n):i(null,r)},!f||f.length<3)||(delete t.highlight,!c))return e();for(;a<o.length;a++)(function(n){return n.type!=="code"?--c||e():f(n.text,n.lang,function(t,i){if(t)return e(t);if(i==null||i===n.text)return--c||e();n.text=i;n.escaped=!0;--c||e()})})(o[a]);return}try{return t&&(t=s({},r.defaults,t)),h.parse(l.lex(n,t),t)}catch(v){if(v.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||r.defaults).silent)return"<p>An error occurred:<\/p><pre>"+u(v.message+"",!0)+"<\/pre>";throw v;}}var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:a,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:a,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:<\/\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|<\/?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|<\/(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:a,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/},i,v,k;t._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/;t._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;t.def=e(t.def).replace("label",t._label).replace("title",t._title).getRegex();t.bullet=/(?:[*+-]|\d{1,9}\.)/;t.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/;t.item=e(t.item,"gm").replace(/bull/g,t.bullet).getRegex();t.list=e(t.list).replace(/bull/g,t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+t.def.source+")").getRegex();t._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";t._comment=/<!--(?!-?>)[\s\S]*?-->/;t.html=e(t.html,"i").replace("comment",t._comment).replace("tag",t._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();t.paragraph=e(t.paragraph).replace("hr",t.hr).replace("heading",t.heading).replace("lheading",t.lheading).replace("tag",t._tag).getRegex();t.blockquote=e(t.blockquote).replace("paragraph",t.paragraph).getRegex();t.normal=s({},t);t.gfm=s({},t.normal,{fences:/^ {0,3}(`{3,}|~{3,})([^`\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/});t.gfm.paragraph=e(t.paragraph).replace("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|").getRegex();t.tables=s({},t.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/});t.pedantic=s({},t.normal,{html:e("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?<\/\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",t._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/});l.rules=t;l.lex=function(n,t){var i=new l(t);return i.lex(n)};l.prototype.lex=function(n){return n=n.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(n,!0)};l.prototype.token=function(n,i){n=n.replace(/^ +$/gm,"");for(var h,o,r,s,c,u,l,a,v,p,f,w,e,b,k,g;n;){if((r=this.rules.newline.exec(n))&&(n=n.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(n)){n=n.substring(r[0].length);r=r[0].replace(/^ {4}/gm,"");this.tokens.push({type:"code",text:this.options.pedantic?r:d(r,"\n")});continue}if(r=this.rules.fences.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"code",lang:r[2]?r[2].trim():r[2],text:r[3]||""});continue}if(r=this.rules.heading.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});continue}if((r=this.rules.nptable.exec(n))&&(u={type:"table",header:y(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]},u.header.length===u.align.length)){for(n=n.substring(r[0].length),f=0;f<u.align.length;f++)u.align[f]=/^ *-+: *$/.test(u.align[f])?"right":/^ *:-+: *$/.test(u.align[f])?"center":/^ *:-+ *$/.test(u.align[f])?"left":null;for(f=0;f<u.cells.length;f++)u.cells[f]=y(u.cells[f],u.header.length);this.tokens.push(u);continue}if(r=this.rules.hr.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"hr"});continue}if(r=this.rules.blockquote.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"blockquote_start"});r=r[0].replace(/^ *> ?/gm,"");this.token(r,i);this.tokens.push({type:"blockquote_end"});continue}if(r=this.rules.list.exec(n)){for(n=n.substring(r[0].length),s=r[2],b=s.length>1,l={type:"list_start",ordered:b,start:b?+s:"",loose:!1},this.tokens.push(l),r=r[0].match(this.rules.item),a=[],h=!1,e=r.length,f=0;f<e;f++)u=r[f],p=u.length,u=u.replace(/^ *([*+-]|\d+\.) */,""),~u.indexOf("\n ")&&(p-=u.length,u=this.options.pedantic?u.replace(/^ {1,4}/gm,""):u.replace(new RegExp("^ {1,"+p+"}","gm"),"")),f!==e-1&&(c=t.bullet.exec(r[f+1])[0],(s.length>1?c.length===1:c.length>1||this.options.smartLists&&c!==s)&&(n=r.slice(f+1).join("\n")+n,f=e-1)),o=h||/\n\n(?!\s*$)/.test(u),f!==e-1&&(h=u.charAt(u.length-1)==="\n",o||(o=h)),o&&(l.loose=!0),k=/^\[[ xX]\] /.test(u),g=undefined,k&&(g=u[1]!==" ",u=u.replace(/^\[[ xX]\] +/,"")),v={type:"list_item_start",task:k,checked:g,loose:o},a.push(v),this.tokens.push(v),this.token(u,!1),this.tokens.push({type:"list_item_end"});if(l.loose)for(e=a.length,f=0;f<e;f++)a[f].loose=!0;this.tokens.push({type:"list_end"});continue}if(r=this.rules.html.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]});continue}if(i&&(r=this.rules.def.exec(n))){n=n.substring(r[0].length);r[3]&&(r[3]=r[3].substring(1,r[3].length-1));w=r[1].toLowerCase().replace(/\s+/g," ");this.tokens.links[w]||(this.tokens.links[w]={href:r[2],title:r[3]});continue}if((r=this.rules.table.exec(n))&&(u={type:"table",header:y(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]},u.header.length===u.align.length)){for(n=n.substring(r[0].length),f=0;f<u.align.length;f++)u.align[f]=/^ *-+: *$/.test(u.align[f])?"right":/^ *:-+: *$/.test(u.align[f])?"center":/^ *:-+ *$/.test(u.align[f])?"left":null;for(f=0;f<u.cells.length;f++)u.cells[f]=y(u.cells[f].replace(/^ *\| *| *\| *$/g,""),u.header.length);this.tokens.push(u);continue}if(r=this.rules.lheading.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"heading",depth:r[2]==="="?1:2,text:r[1]});continue}if(i&&(r=this.rules.paragraph.exec(n))){n=n.substring(r[0].length);this.tokens.push({type:"paragraph",text:r[1].charAt(r[1].length-1)==="\n"?r[1].slice(0,-1):r[1]});continue}if(r=this.rules.text.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"text",text:r[0]});continue}if(n)throw new Error("Infinite loop on byte: "+n.charCodeAt(0));}return this.tokens};i={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:a,tag:"^comment|^<\/[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:a,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};i._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~";i.em=e(i.em).replace(/punctuation/g,i._punctuation).getRegex();i._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;i._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;i._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;i.autolink=e(i.autolink).replace("scheme",i._scheme).replace("email",i._email).getRegex();i._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;i.tag=e(i.tag).replace("comment",t._comment).replace("attribute",i._attribute).getRegex();i._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|`(?!`)|[^\[\]\\`])*?/;i._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*)/;i._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;i.link=e(i.link).replace("label",i._label).replace("href",i._href).replace("title",i._title).getRegex();i.reflink=e(i.reflink).replace("label",i._label).getRegex();i.normal=s({},i);i.pedantic=s({},i.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:e(/^!?\[(label)\]\((.*?)\)/).replace("label",i._label).getRegex(),reflink:e(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",i._label).getRegex()});i.gfm=s({},i.normal,{escape:e(i.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/});i.gfm.url=e(i.gfm.url,"i").replace("email",i.gfm._extended_email).getRegex();i.breaks=s({},i.gfm,{br:e(i.br).replace("{2,}","*").getRegex(),text:e(i.gfm.text).replace(/\{2,\}/g,"*").getRegex()});o.rules=i;o.output=function(n,t,i){var r=new o(t,i);return r.output(n)};o.prototype.output=function(n){for(var i="",e,f,r,s,t,c,h,l;n;){if(t=this.rules.escape.exec(n)){n=n.substring(t[0].length);i+=u(t[1]);continue}if(t=this.rules.tag.exec(n)){!this.inLink&&/^<a /i.test(t[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(t[0])&&(this.inLink=!1);!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.inRawBlock=!1);n=n.substring(t[0].length);i+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):u(t[0]):t[0];continue}if(t=this.rules.link.exec(n)){h=nt(t[2],"()");h>-1&&(l=t[0].length-(t[2].length-h)-(t[3]||"").length,t[2]=t[2].substring(0,h),t[0]=t[0].substring(0,l).trim(),t[3]="");n=n.substring(t[0].length);this.inLink=!0;r=t[2];this.options.pedantic?(e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r),e?(r=e[1],s=e[3]):s=""):s=t[3]?t[3].slice(1,-1):"";r=r.trim().replace(/^<([\s\S]*)>$/,"$1");i+=this.outputLink(t,{href:o.escapes(r),title:o.escapes(s)});this.inLink=!1;continue}if((t=this.rules.reflink.exec(n))||(t=this.rules.nolink.exec(n))){if(n=n.substring(t[0].length),e=(t[2]||t[1]).replace(/\s+/g," "),e=this.links[e.toLowerCase()],!e||!e.href){i+=t[0].charAt(0);n=t[0].substring(1)+n;continue}this.inLink=!0;i+=this.outputLink(t,e);this.inLink=!1;continue}if(t=this.rules.strong.exec(n)){n=n.substring(t[0].length);i+=this.renderer.strong(this.output(t[4]||t[3]||t[2]||t[1]));continue}if(t=this.rules.em.exec(n)){n=n.substring(t[0].length);i+=this.renderer.em(this.output(t[6]||t[5]||t[4]||t[3]||t[2]||t[1]));continue}if(t=this.rules.code.exec(n)){n=n.substring(t[0].length);i+=this.renderer.codespan(u(t[2].trim(),!0));continue}if(t=this.rules.br.exec(n)){n=n.substring(t[0].length);i+=this.renderer.br();continue}if(t=this.rules.del.exec(n)){n=n.substring(t[0].length);i+=this.renderer.del(this.output(t[1]));continue}if(t=this.rules.autolink.exec(n)){n=n.substring(t[0].length);t[2]==="@"?(f=u(this.mangle(t[1])),r="mailto:"+f):(f=u(t[1]),r=f);i+=this.renderer.link(r,null,f);continue}if(!this.inLink&&(t=this.rules.url.exec(n))){if(t[2]==="@")f=u(t[0]),r="mailto:"+f;else{do c=t[0],t[0]=this.rules._backpedal.exec(t[0])[0];while(c!==t[0]);f=u(t[0]);r=t[1]==="www."?"http://"+f:f}n=n.substring(t[0].length);i+=this.renderer.link(r,null,f);continue}if(t=this.rules.text.exec(n)){n=n.substring(t[0].length);i+=this.inRawBlock?this.renderer.text(t[0]):this.renderer.text(u(this.smartypants(t[0])));continue}if(n)throw new Error("Infinite loop on byte: "+n.charCodeAt(0));}return i};o.escapes=function(n){return n?n.replace(o.rules._escapes,"$1"):n};o.prototype.outputLink=function(n,t){var i=t.href,r=t.title?u(t.title):null;return n[0].charAt(0)!=="!"?this.renderer.link(i,r,this.output(n[1])):this.renderer.image(i,r,u(n[1]))};o.prototype.smartypants=function(n){return this.options.smartypants?n.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):n};o.prototype.mangle=function(n){if(!this.options.mangle)return n;for(var r="",u=n.length,i=0,t;i<u;i++)t=n.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),r+="&#"+t+";";return r};f.prototype.code=function(n,t,i){var f=(t||"").match(/\S*/)[0],r;return(this.options.highlight&&(r=this.options.highlight(n,f),r!=null&&r!==n&&(i=!0,n=r)),!f)?"<pre><code>"+(i?n:u(n,!0))+"<\/code><\/pre>":'<pre><code class="'+this.options.langPrefix+u(f,!0)+'">'+(i?n:u(n,!0))+"<\/code><\/pre>\n"};f.prototype.blockquote=function(n){return"<blockquote>\n"+n+"<\/blockquote>\n"};f.prototype.html=function(n){return n};f.prototype.heading=function(n,t,i,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(i)+'">'+n+"<\/h"+t+">\n":"<h"+t+">"+n+"<\/h"+t+">\n"};f.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"};f.prototype.list=function(n,t,i){var r=t?"ol":"ul",u=t&&i!==1?' start="'+i+'"':"";return"<"+r+u+">\n"+n+"<\/"+r+">\n"};f.prototype.listitem=function(n){return"<li>"+n+"<\/li>\n"};f.prototype.checkbox=function(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "};f.prototype.paragraph=function(n){return"<p>"+n+"<\/p>\n"};f.prototype.table=function(n,t){return t&&(t="<tbody>"+t+"<\/tbody>"),"<table>\n<thead>\n"+n+"<\/thead>\n"+t+"<\/table>\n"};f.prototype.tablerow=function(n){return"<tr>\n"+n+"<\/tr>\n"};f.prototype.tablecell=function(n,t){var i=t.header?"th":"td",r=t.align?"<"+i+' align="'+t.align+'">':"<"+i+">";return r+n+"<\/"+i+">\n"};f.prototype.strong=function(n){return"<strong>"+n+"<\/strong>"};f.prototype.em=function(n){return"<em>"+n+"<\/em>"};f.prototype.codespan=function(n){return"<code>"+n+"<\/code>"};f.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"};f.prototype.del=function(n){return"<del>"+n+"<\/del>"};f.prototype.link=function(n,t,i){if(n=b(this.options.sanitize,this.options.baseUrl,n),n===null)return i;var r='<a href="'+u(n)+'"';return t&&(r+=' title="'+t+'"'),r+(">"+i+"<\/a>")};f.prototype.image=function(n,t,i){if(n=b(this.options.sanitize,this.options.baseUrl,n),n===null)return i;var r='<img src="'+n+'" alt="'+i+'"';return t&&(r+=' title="'+t+'"'),r+(this.options.xhtml?"/>":">")};f.prototype.text=function(n){return n};c.prototype.strong=c.prototype.em=c.prototype.codespan=c.prototype.del=c.prototype.text=function(n){return n};c.prototype.link=c.prototype.image=function(n,t,i){return""+i};c.prototype.br=function(){return""};h.parse=function(n,t){var i=new h(t);return i.parse(n)};h.prototype.parse=function(n){this.inline=new o(n.links,this.options);this.inlineText=new o(n.links,s({},this.options,{renderer:new c}));this.tokens=n.reverse();for(var t="";this.next();)t+=this.tok();return t};h.prototype.next=function(){return this.token=this.tokens.pop()};h.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};h.prototype.parseText=function(){for(var n=this.token.text;this.peek().type==="text";)n+="\n"+this.next().text;return this.inline.output(n)};h.prototype.tok=function(){var u,n,t,f,i,r,o,s,e;switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,w(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":for(u="",n="",i="",t=0;t<this.token.header.length;t++)i+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(u+=this.renderer.tablerow(i),t=0;t<this.token.cells.length;t++){for(f=this.token.cells[t],i="",r=0;r<f.length;r++)i+=this.renderer.tablecell(this.inline.output(f[r]),{header:!1,align:this.token.align[r]});n+=this.renderer.tablerow(i)}return this.renderer.table(u,n);case"blockquote_start":for(n="";this.next().type!=="blockquote_end";)n+=this.tok();return this.renderer.blockquote(n);case"list_start":for(n="",o=this.token.ordered,s=this.token.start;this.next().type!=="list_end";)n+=this.tok();return this.renderer.list(n,o,s);case"list_item_start":n="";var c=this.token.loose,h=this.token.checked,l=this.token.task;for(this.token.task&&(n+=this.renderer.checkbox(h));this.next().type!=="list_item_end";)n+=!c&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(n,l,h);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:if(e='Token with "'+this.token.type+'" type was not found.',this.options.silent)console.log(e);else throw new Error(e);}};p.prototype.slug=function(n){var t=n.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-"),i;if(this.seen.hasOwnProperty(t)){i=t;do this.seen[i]++,t=i+"-"+this.seen[i];while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t};u.escapeTest=/[&<>"']/;u.escapeReplace=/[&<>"']/g;u.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};u.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/;u.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;v={};k=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;a.exec=a;r.options=r.setOptions=function(n){return s(r.defaults,n),r};r.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new f,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}};r.defaults=r.getDefaults();r.Parser=h;r.parser=h.parse;r.Renderer=f;r.TextRenderer=c;r.Lexer=l;r.lexer=l.lex;r.InlineLexer=o;r.inlineLexer=o.output;r.Slugger=p;r.parse=r;typeof module!="undefined"&&typeof exports=="object"?module.exports=r:typeof define=="function"&&define.amd?define(function(){return r}):n.marked=r}(this||(typeof window!="undefined"?window:global)),function(n){function i(t,u,f,e){const s=n("input[type=text]",f).length,o=n(t.target).parents(".list-group-item").is(":last-child");if(u&&u.success||n(t.target).val()!==""){if(!o)return;const t=`<li class="list-group-item">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <small class="input-group-text" style="font-size: 0.75em">#${s+1}</small>
                                    </div>
                                    <input type="text" placeholder="Paste, drag and drop or browse file to upload..." name="${e}" class="form-control" />
                                    <div class="input-group-append">
                                        <div class="custom-file">
                                            <input type="file" class="custom-file-input" style="width: 70px" value="" />
                                            <label class="custom-file-label"></label>
                                        </div>
                                    </div>
                                </div>
                            </li>`;f.append(t);imagePasteHandler(n("input[type=text]",f)).off("upload-complete blur").on("upload-complete blur",function(n,t){i(n,t,f,e)});n(document).trigger("reinitialize-change-listeners")}else{if(o)return;n(t.target).parents(".list-group-item").remove()}r(f)}function r(t){const i=n(".input-group-text",t);for(let t=0;t<i.length;t++)n(i[t]).text(`#${t+1}`)}const t=n(".gallery-editor");for(let r=0;r<t.length;r++){const u=n(t[r]),f=n("input[type=text]",u)[0].name;imagePasteHandler(n("input[type=text]",u)).on("upload-complete blur",function(n,t){i(n,t,u,f)})}}(jQuery),function(n){function i(t,f,e,o){var s=n(t.target).parents(".list-group-item").is(":last-child");if(n(t.target).val()!==""){if(!s)return;const t=r(o);f.append(t);n("input,select,textarea",f).off("blur input change propertychange paste").on("blur input change propertychange paste",function(n){i(n,f,e,o)});n(document).trigger("reinitialize-change-listeners")}else{if(s)return;n(t.target).parents(".list-group-item").remove()}u(f)}function r(t){var i=t.clone();return n("input,select,textarea",i).val(""),i}function u(t){const i=n(".input-group-text",t);for(let t=0;t<i.length;t++)n(i[t]).text(`#${t+1}`)}const t=n(".enumerable-editor");for(let r=0;r<t.length;r++){const u=n(t[r]),f=n("input,select,textarea",u)[0].name,e=n(".new-item",u).eq(0);n("input,select,textarea",u).on("blur input change propertychange paste",function(n){i(n,u,f,e)})}}(jQuery),function(n){"use strict";window.administration=function(){function i(t){return n(t).val()}var t=this,r=null,u=null,f=null,e=null;return t.init=function(o,s,h,c){r=o;u=s;f=h;e=i(c);n(".js-account-lock").on("click",t.lockAccount);n(".js-account-unlock").on("click",t.unlockAccount);n(".js-account-delete").on("click",t.deleteAccount);return t},t.lockAccount=function(t){return t.preventDefault(),n.ajax(r,{dataType:"json",method:"GET",contentType:"application/json; charset=utf-8",headers:{RequestVerificationToken:i()}}).done(function(n){window.location.href=n.redirectUrl}).fail(function(n){console.log(n)}),!1},t.unlockAccount=function(t){return t.preventDefault(),n.ajax(u,{dataType:"json",method:"GET",contentType:"application/json; charset=utf-8",headers:{RequestVerificationToken:i()}}).done(function(n){window.location.href=n.redirectUrl}).fail(function(n){console.log(n)}),!1},t.deleteAccount=function(t){return(t.preventDefault(),!confirm("Are you absolutely sure you want to do this?"))?!1:(n.ajax(f,{dataType:"json",method:"GET",contentType:"application/json; charset=utf-8",headers:{RequestVerificationToken:i()}}).done(function(n){window.location.href=n.redirectUrl}).fail(function(n){console.log(n)}),!1)},t}}(jQuery),function(n){window.EzmsNavigation=function(t,i,r,u,f,e,o,s){function a(){var i=t;return n(i).val()}function it(t){const i=t.src.toLowerCase();window.location.hash=p(i);const r=n("#selectLanguage");if(r){let n=w,t=n.indexOf("&");t===-1&&(t=n.length);n=n.splice(t,0,encodeURIComponent(`#${i}`));r.attr("action",`${n.replace("&amp;","&")}`)}}function h(t){event&&event.preventDefault();n(".loading").show();t=t.toLowerCase();const i=document.getElementById("page-frame").src.toLowerCase();return i!==t&&(document.getElementById("page-frame").src=t),!1}function c(t){n(".loading").hide();t.style.height="";t.style.height=window.document.body.scrollHeight-90+"px";var i=n("#cms-site-navigation");n.ajax(b).done(function(r){if(r){const u=i.find("> ul");u.length!==0&&u.remove();i.append(n(r));v();n(".js-content-link",i).off("click").on("click",function(t){if(t.ctrlKey)return!0;t.preventDefault();const i=n(this).data("editurl");h(i)});y();const f=t.src.split("/"),e=(f[f.length-1].match(/[0-9]+/)||["about:blank"])[0];e!=="about:blank"&&n(`a[data-contentid = ${e}]`,i).addClass("font-weight-bold")}})}function v(){n("ul.sortable").sortable({placeholder:"sortable-placeholder",connectWith:"ul.sortable",revert:!0,dropOnEmpty:!0,start:function(){n("#page-frame").off("load");n(".draggable-placeholder").show()},stop:function(){n("#page-frame").on("load",function(){c(this)});n(".draggable-placeholder").hide()},update:function(t,i){const u=i.item.data("id"),r=i.item.closest("ul"),f=r.find("li").get().map(function(t){return n(t).data("id")});n.ajax(k,{dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({contentId:u,parentId:r.data("parentid"),children:f}),headers:{RequestVerificationToken:a()}}).done(function(){document.getElementById("page-frame").contentWindow.location.reload()})}});n("li.draggable").draggable({connectToSortable:"ul.sortable",revert:"invalid",gready:!0,handle:"a",snapTolerance:10});n("ul, li").disableSelection()}function y(){n(".hover-menu").off("click").on("click",function(t){t.stopPropagation();const i=n("#context-menu"),r=n(this).data("id"),f=n(this).data("published")===!0,e=t.pageY-54,o=t.pageX-i.width();rt(i,r,f);n("#delete-link",i).attr("href",`${tt.replace("0",r)}`).off("click").on("click",function(n){n.preventDefault();h(p(this.href));l()});const u=n("#create-sub-page",i);n("button",u).off("click").on("click",function(t){return t.stopPropagation(),t.preventDefault(),n("#page-frame").attr("src",`${d}?parentId=${r}&guid=${n("select",u).val()}`),l(),n("select",u).val(""),!1});i.css({display:"block",top:e,left:o}).addClass("show")})}function p(n){return n.replace(/^(?:\/\/|[^\/]+)*/,"")}function rt(t,i,r){const u=n("#publish-link",t).hide(),f=n("#unpublish-link",t).hide();r?f.show():u.show();u.attr("href",`${g.replace("0",i)}`);f.attr("href",`${nt.replace("0",i)}`);n(".js-publish-state-link").off("click").on("click",function(t){t.stopPropagation();t.preventDefault();l();var i=this.href;return n.ajax(i,{method:"GET",headers:{RequestVerificationToken:a()}}).done(function(){n(".loading").show();const t=n("#page-frame").get(0);t.src.toLowerCase()===i.replace(/\?handler=.*$/i,"").toLowerCase()?t.contentWindow.location.reload():c(t)}),!1})}function l(){const t=n("#context-menu");t.removeClass("show").hide();n("select",t).val("")}function ut(){n("#page-frame").on("load",function(){it(this);c(this)});c(n("#page-frame").get(0));v();var t=window.location.hash;t&&t.length!==0&&(t=t.substr(1),h(t));y();n("#cms-site-navigation").on("click",l);n("#context-menu").on("click",function(n){n.stopPropagation()});n(".sidebar-toggle").on("click",function(){n(".sidebar-1").toggleClass("active")});n(".sidebar-toggle-2").on("click",function(){n("#cms-file-browser").toggleClass("active-2")})}const w=i,b=r,k=u,d=f,g=e,nt=o,tt=s;return{init:ut,setIframeSrc:h}}}(jQuery),function(n){window.EzmsFileBrowser=function(t,i,r,u,f,e,o){function h(t){const i=n("#file-list");i.empty();n(".mini-loading").show();n(".preview-content").addClass("d-none");n.ajax(`${r}&virtualPath=${t}`).done(function(t){const e=t.folders,u=t.files;for(var r=0,f=u.length;r<f;r++){const t=u[r],f=t.physicalPath.split("/"),o=f.slice(4,f.length).join("/"),e=n(`
                        <li class="d-flex align-items-center filebrowser-file" data-virtualpath="${o}">
                            <div class="text-truncate">${t.name}</div>
                            <div class="ml-auto js-copy" style="cursor: copy;" title="Click to copy path">
                                <i class="far fa-copy"></i>
                            </div>
                        </li>`);e.data("file",t);i.append(e)}s();n(".mini-loading").hide()})}function c(t,i){n.ajax(`${u}&virtualPath=${i}`).done(function(n){const i=n.folders;v(t,i||[])})}function l(t,i){n.ajax(`${f}&virtualPath=${t}`).done(function(n){const t=n.contents||[];i&&i(t)})}function a(t,i){n.ajax(`${e}&virtualPath=${t}`).done(function(n){i&&i(n)})}function v(t,i){const u=n('<ul class="list-unstyled ml-3"><\/ul>');for(var r=0,f=i.length;r<f;r++){const t=i[r];u.append(n(`
                    <li data-virtualpath="${t.virtualPath}">
                        <div class="d-flex align-items-center">
                            <div class="mr-2 js-toggle-folder">
                                <i class="fas fa-caret-right"></i>
                            </div>
                            <div class="filebrowser-folder text-truncate">${t.name}</div>
                            <div class="ml-auto js-copy" title="Click to copy path">
                                <i class="far fa-copy"></i>
                            </div>
                        </div>
                    </li>`))}n(t).append(u);s()}function y(t){t.preventDefault();let r=n(t.target).data("virtualpath");return r||(r=n(t.target).parents("[data-virtualpath]").data("virtualpath")),r=`/${i}/${r}`,p(r),!1}function p(n){var t=document.createElement("textarea");t.value=n;t.setAttribute("readonly","");t.style={position:"absolute",left:"-9999px"};document.body.appendChild(t);t.select();document.execCommand("copy");document.body.removeChild(t)}function s(){n(".filebrowser-folder").off("click").on("click",function(t){n(".filebrowser-folder").removeClass("active");const r=n(t.target).addClass("active");let i=r.data("virtualpath");i||(i=r.parents("[data-virtualpath]").data("virtualpath"));h(i)});n(".js-toggle-folder").off("click").on("click",function(t){var i=n(t.target);let u=i.data("virtualpath");u||(u=i.parents("[data-virtualpath]").data("virtualpath"));const e=i.parents("li").eq(0),r=n("> ul",e),f=r?r.length!==0:!1;f||c(e,u);i.hasClass("fa-caret-right")?(i.removeClass("fa-caret-right").addClass("fa-caret-down"),f&&r.show()):(i.removeClass("fa-caret-down").addClass("fa-caret-right"),f&&r.hide())});n(".filebrowser-file").off("click").on("click",function(t){const r=n(t.target);n(".filebrowser-file").removeClass("active");r.addClass("active");let i=r.data("file"),u=r.data("virtualpath");if(!i){const n=r.parents("li").eq(0);i=n.data("file");u=n.data("virtualpath");n.addClass("active")}n(".preview-content").removeClass("d-none");b(i.physicalPath)?n(".preview-image").attr("src",i.physicalPath).removeClass("d-none"):n(".preview-image").attr("src","").addClass("d-none");n(".preview-name").text(i.name);n(".preview-date").text(new Date(i.lastModified).toUTCString());n(".preview-size").text(i.size);const f=n(".file-used-by"),e=n(".delete-file").addClass("d-none");f.empty();l(u,t=>{if(t.length===0){e.removeClass("d-none");e.off("click").on("click",t=>{t.preventDefault(),a(u,t=>{t.result===!0&&n(".filebrowser-file.active").remove()})});return}for(var i=0,r=t.length;i<r;i++){const r=t[i],u=n(`<li><a href="${r.url}">${r.name}</a></li>`);u.on("click",n=>{n.preventDefault(),window.parent.ezmsNavigation.setIframeSrc(o.replace("0",r.id))});f.append(u)}})});n(".js-copy").off("click").on("click",y)}function w(n){if(!n)return"";const t=n.split(".");return t[t.length-1].toLowerCase()}function b(n){const t=w(n);return/jpg|jpeg|bmp|gif|png|tiff/i.test(t)}function k(){s()}return{init:k}}}(jQuery),function(n,t){function f(n,t){const i=parseInt(n.css("line-height"));n.scrollTop(t*i)}function u(t){t&&(t=n(t),t.css("max-height","268px"),t.css("height",t.prop("scrollHeight")+"px"))}function i(t,i){i=i.toLowerCase();const u=t[0].selectionStart||parseInt(t.data("position-start")),o=t[0].selectionEnd||parseInt(t.data("position-end"));t[0].selectionStart=u;t[0].selectionEnd=o;t[0].setSelectionRange(u,o);let f=n(t).val(),s=f.substr(u,o-u).trim("\r\n"),r="",e="";switch(i){case"header":r="## ";break;case"bold":r="**";e="**";break;case"italic":r="_";e="_";break;case"quote":r="\n> ";break;case"code":r="```\n";e="\n```";break;case"link":r="[";e="](url)";break;case"image":r="![";e="](url)";break;case"ulist":r="- ";break;case"olist":r=". ";break;case"clist":r="- [ ] "}if(t.focus(),u===o&&i!=="olist"){const n=document.execCommand("insertText",!1,r+e);n||(f=[f.slice(0,u),r,e,f.slice(u)].join(""),t.val(f));i==="link"?t[0].setSelectionRange(u+1,u+1):t[0].setSelectionRange(u+r.length,u+r.length)}else{let n=s.split("\n");const h=n.length;for(let t=0,u=h;t<u;t++)n[t]=[i==="olist"?t+1:"",r,n[t],e].join("");const c=h!==1?n.join("\n"):n[0],l=document.execCommand("insertText",!1,c);if(l||(f=[f.slice(0,u),c,f.slice(o)].join(""),t.val(f)),i==="link")t[0].setSelectionRange(u+s.length+3,o+6);else if(!l){const n=o+(r.length+e.length)*h;t[0].setSelectionRange(n,n)}}}t.setOptions({});const e=function(n){return t(n)},r=n(".markdown-editor");for(let e=0;e<r.length;e++){const s=r.get(e),o=n("textarea",s),h=n(".btn-preview",s),c=n(".btn-write",s),l=n(".preview",s),a=n(".toolbar .functions",s),v=n("span.fas",a);h.bind("click",n=>(n.preventDefault(),l.html(t(o.val())),a.hide(),o.hide(),l.show(),h.addClass("active"),c.removeClass("active"),!1));c.bind("click",n=>(n.preventDefault(),o.show(),a.show(),l.hide(),h.removeClass("active"),c.addClass("active"),!1));o.bind("input propertychange textarea-adjust",n=>{u(n.target)});o.bind("keydown",t=>{if(t.ctrlKey&&/^(?:b|i|k){1}$/i.test(t.key)){t.preventDefault();const r=n(t.target);switch(t.key.toLowerCase()){case"k":i(r,"link");break;case"b":i(r,"bold");break;case"i":i(r,"italic")}}if(t.keyCode===13){const u=t.target.value.substr(0,t.target.selectionStart),i=u.split("\n"),r=i[i.length-1].match(/^(\d+)\./)||[];if(r.length>1){t.preventDefault();const u=parseInt(r[1])+1,e=`
${u}. `;document.execCommand("insertText",!1,e);f(n(t.target),i.length-1);t.target.selectionStart=t.target.selectionStart}}});o.bind("focusout",n=>{o.data("position-start",n.target.selectionStart),o.data("position-end",n.target.selectionEnd)});u(o);v.bind("click",t=>i(o,n(t.target).data("actiontype")))}n(".markdown-content").each((i,r)=>{const u=n(r);u.html(t(u.text().trim())).show()});imagePasteHandler(".markdown-editor > textarea");imagePasteHandler(".image-form-input");n(function(){if(n('[data-toggle="tooltip"]').tooltip(),window.top!==window&&(n("header").hide(),n("footer").hide()),window.location.hash){var t=n("#selectLanguage");t&&t.attr("action",`${t.attr("action")}/#${window.location.hash}`)}n(".js-administration input[type=checkbox]").on("change",function(){var t=n(this),i=t.is(":checked");i?t.val(t.data("value")):t.val("false")})})}(jQuery,marked);String.prototype.splice||(String.prototype.splice=function(n,t,i){return this.slice(0,n)+i+this.slice(n+Math.abs(t))});